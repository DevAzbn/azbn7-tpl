!function(r){r.Azbn7&&r.Azbn7.load("CodeCache",new function(){var d=this;return d.name="codecache",d.uid="azbn7__mdl__codecache",d.__intervals={},d.config={expires_in:3600,update_or_expires:300},d.remove=function(e){r.Azbn7.ls.remove(e)},d.download=function(n,a,t){a=a||!1;var e=n.url;e.indexOf("http://")<0&&e.indexOf("https://")<0&&0!=e.indexOf("//")&&(e=r.Azbn7.config.path.root+e),r.ajax(n.url,{type:"GET",dataType:"text",success:function(e){var i={tag:n.tag,uid:n.uid,url:n.url,expires:r.Azbn7.now_sec()+(n.expires_in||d.config.expires_in),expires_in:n.expires_in,html:"<"+n.tag+">"+e+"</"+n.tag+">"};r.Azbn7.ls.obj2s(n.uid,i),r("."+d.uid+"[data-"+d.uid+'-uid="'+n.uid+'"]').attr("data-"+d.uid+"-expires-in",n.expires_in),a&&d.eval(i,!0,t)}})},d.doUpdate=function(e){e=e||6e4,d.__intervals.codecache=setInterval(function(){r("."+d.uid).each(function(e){var i=r(this),n=i.attr("data-"+d.uid+"-uid")||"",a=r.Azbn7.ls.s2obj(n);if(a){var t=a.expires-r.Azbn7.now_sec();i.attr("data-"+d.uid+"-expires-in",t),0<t?t<d.config.update_or_expires&&d.download(a,!1):d.download(a,!1)}})},e)},d.eval=function(e,i,n){var a=r(e.html);a.attr("id",d.name+"-"+r.Azbn7.randstr()).attr("class",d.uid).attr("data-"+d.uid+"-expires-in",e.expires-r.Azbn7.now_sec()).attr("data-"+d.uid+"-uid",e.uid).attr("data-"+d.uid+"-from-url",i),n&&n(a)},d.load=function(e,i){var n=r.extend({},{tag:"!--",uid:"html.default",url:"",expires:r.Azbn7.now_sec()+(e.expires_in||d.config.expires_in),expires_in:3600,html:""},e);n.uid=d.name+"."+n.uid;var a=r.Azbn7.ls.s2obj(n.uid);a?(a.expires_in=n.expires_in,a.expires>r.Azbn7.now_sec()?d.eval(a,!1,i):d.download(n,!0,i)):d.download(n,!0,i)},d})}(jQuery);