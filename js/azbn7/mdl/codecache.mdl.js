"use strict";!function(e){e.Azbn7&&!function(){var i=function(){var i=this;return i.name="codecache",i.uid="azbn7__mdl__codecache",i.__intervals={},i.config={expires_in:3600,update_or_expires:300},i.remove=function(i){e.Azbn7.ls.remove(i)},i.download=function(n,a,t){a=a||!1;var r=n.url;r.indexOf("http://")<0&&r.indexOf("https://")<0&&0!=r.indexOf("//")&&(r=e.Azbn7.config.path.root+r),e.ajax(n.url,{type:"GET",dataType:"text",success:function(r){var d={tag:n.tag,uid:n.uid,url:n.url,expires:e.Azbn7.now_sec()+(n.expires_in||i.config.expires_in),expires_in:n.expires_in,html:"<"+n.tag+">"+r+"</"+n.tag+">"};e.Azbn7.ls.obj2s(n.uid,d),e("."+i.uid+"[data-"+i.uid+'-uid="'+n.uid+'"]').attr("data-"+i.uid+"-expires-in",n.expires_in),a&&i.eval(d,!0,t)}})},i.doUpdate=function(n){n=n||6e4,i.__intervals.codecache=setInterval(function(){var n=e("."+i.uid);n.each(function(n){var a=e(this),t=a.attr("data-"+i.uid+"-uid")||"",r=e.Azbn7.ls.s2obj(t);if(r){var d=r.expires-e.Azbn7.now_sec();a.attr("data-"+i.uid+"-expires-in",d),d>0?d<i.config.update_or_expires&&i.download(r,!1):i.download(r,!1)}})},n)},i.eval=function(n,a,t){var r=e(n.html);r.attr("id",i.name+"-"+e.Azbn7.randstr()).attr("class",i.uid).attr("data-"+i.uid+"-expires-in",n.expires-e.Azbn7.now_sec()).attr("data-"+i.uid+"-uid",n.uid).attr("data-"+i.uid+"-from-url",a),t&&t(r)},i.load=function(n,a){var t=e.extend({},{tag:"!--",uid:"html.default",url:"",expires:e.Azbn7.now_sec()+(n.expires_in||i.config.expires_in),expires_in:3600,html:""},n);t.uid=i.name+"."+t.uid;var r=e.Azbn7.ls.s2obj(t.uid);r?(r.expires_in=t.expires_in,r.expires>e.Azbn7.now_sec()?i.eval(r,!1,a):i.download(t,!0,a)):i.download(t,!0,a)},i};e.Azbn7.load("CodeCache",new i)}()}(jQuery);